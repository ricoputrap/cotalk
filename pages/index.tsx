import { Box, Flex } from '@chakra-ui/react';
import type { NextPage } from 'next'
import Head from 'next/head'
import React from 'react';
import ComposeBox from '../components/ComposeBox';
import MessageList from '../components/MessageList';
import useReceiveMessage from '../hooks/useReceiveMessage';
import useSocket from '../hooks/useSocket';
import styles from '../styles/Home.module.css'
import { SocketClient } from '../types';

type Props = {
  socket: SocketClient;
}

const Home: NextPage<Props> = ({ socket: socketClient }) => {
  const socket: SocketClient = useSocket(socketClient);
  useReceiveMessage(socket);

  return (
    <div>
      <Head>
        <title>CoTalk - Let&apos;s talk with your coworker!</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={ styles.main }>
        <Box width="100%" height="100%" paddingX="200px">
          <Flex
            direction="column"
            backgroundColor="background"
            height="100%"
            padding="20px 20px 4px"
          >
            <MessageList />

            <ComposeBox socket={socket} />
          </Flex>
        </Box>

      </main>

      <footer>
        
      </footer>
    </div>
  )
}

export default Home
